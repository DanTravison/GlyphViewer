<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:text="clr-namespace:GlyphViewer.Text"
             xmlns:controls="clr-namespace:GlyphViewer.Controls"
             x:Class="GlyphViewer.Views.MetricsView"
             x:DataType="text:GlyphMetricProperties">

    <ContentView.Resources>

        <Style TargetType="Label" x:Key="GlyphPropertyStyle">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource PrimaryDarkText}, Dark={StaticResource White}}"/>
        </Style>

        <Style TargetType="Label" x:Key="GlyphExtendedPropertyStyle">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource PrimaryDarkText}, Dark={StaticResource White}}"/>
        </Style>
        
        <DataTemplate x:Key="NameTemplate"
                      x:DataType="text:GlyphMetricProperty"
                      >
            <Label Text="{Binding Name}" Style="{StaticResource GlyphPropertyStyle}"/>
        </DataTemplate>

        <DataTemplate x:Key="ValueTemplate"
                      x:DataType="text:GlyphMetricProperty"
                      >
            <Label Text="{Binding Value}" Style="{StaticResource GlyphPropertyStyle}"/>
        </DataTemplate>

        <DataTemplate x:Key="ValueSeparatorTemplate"
                      x:DataType="text:GlyphMetricProperty"
                      >
            <Label Text=":" 
                   Padding="5,0,5,0"
                   Style="{StaticResource GlyphPropertyStyle}"/>
        </DataTemplate>

        <DataTemplate x:Key="ExtendedPropertyTemplate"
                      x:DataType="text:GlyphMetricProperty">
            <Grid RowDefinitions="Auto, Auto"
                  ColumnDefinitions="Auto, *">
                <Label Text="{Binding Name}" 
                       Grid.Row="0"
                       Grid.Column="0"
                       Style="{StaticResource GlyphExtendedPropertyStyle}"
                       FontAttributes="Bold"/>
                <Label Text=":" 
                       Grid.Row="0"
                       Grid.Column="1"
                       Style="{StaticResource GlyphExtendedPropertyStyle}"
                       FontAttributes="Bold"/>
                <Label Text="{Binding Value}" 
                       Grid.Row="1"
                       Grid.Column="0"
                       Grid.ColumnSpan="2"
                       Margin="10, 0, 0, 0"
                       Style="{StaticResource GlyphExtendedPropertyStyle}"
                       LineBreakMode="CharacterWrap"
                       />
            </Grid>
        </DataTemplate>

    </ContentView.Resources>

    <VerticalStackLayout Spacing="3">
        <controls:Grid RowHeight="Auto"
                   ItemsSource="{Binding Properties}">
            <controls:Grid.ColumnDefinitions>
                <controls:ColumnDefinition Width="Auto"
                                           ItemTemplate="{StaticResource NameTemplate}"/>
                <controls:ColumnDefinition Width="Auto"
                                           ItemTemplate="{StaticResource ValueSeparatorTemplate}"/>
                <controls:ColumnDefinition Width="Auto"
                                           ItemTemplate="{StaticResource ValueTemplate}"/>
            </controls:Grid.ColumnDefinitions>
        </controls:Grid>

        <BoxView HeightRequest="1"
                 Margin="5"
                 HorizontalOptions="Fill"
                 VerticalOptions="Center"
                 Color="{AppThemeBinding Light={StaticResource Gray400}, Dark={StaticResource Gray100}}"
                 />

        <VerticalStackLayout Spacing="5"
                             BindableLayout.ItemsSource="{Binding ExtendedProperties}"
                             BindableLayout.ItemTemplate="{StaticResource ExtendedPropertyTemplate}"/>
    </VerticalStackLayout>

</ContentView>
